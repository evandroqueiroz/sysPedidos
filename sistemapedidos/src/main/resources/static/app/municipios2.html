<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Municípios</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src='main.js'></script>
</head>
<body>
    <h1>Listagem de Municípios</h1>
    <table border="1" id="listagem"></table>
</body>
<script>
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function(){
        if(this.readyState == 4 && this.status == 200){
            console.log("Sucesso");
            console.log(this.responseText);
            var dados = JSON.parse(this.responseText);
            console.log(dados);
            var conteudo = "<tr> <th>ID</th> <th>Nome</th> <th>Estado</th> <th>Entrega</th></tr>";
            for(var municipio of dados){
                conteudo += "<tr> <td>" + municipio.id + "</td> <td>" + municipio.nome + "</td> <td>" + municipio.estado.nome + "</td> <td>" + municipio.entrega + "</td> </tr>"
                
            }
            document.getElementById("listagem").innerHTML = conteudo;
        }
    }
    xhttp.open("GET", "/municipios");
    xhttp.send();


</script>
</html>